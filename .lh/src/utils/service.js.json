{
    "sourceFile": "src/utils/service.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1691468319064,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1691468488870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import axios from 'axios'\r\n-import { usePlaneData } from ''\r\n+import { useUserStoreHook } from \"../stores/login\"\r\n \r\n const store = usePlaneData()\r\n \r\n axios.defaults.timeout = 5000\r\n@@ -8,17 +8,19 @@\n \r\n \r\n \r\n axios.interceptors.request.use(\r\n-    config => {\r\n-        if (store.state.token) {\r\n-            config.headers.Authorization = `token ${store.state.token}`\r\n-        }\r\n-        return config\r\n-    },\r\n-    err => {\r\n-        return Promise.reject(err)\r\n-    },\r\n+    (config) => config,\r\n+    (error) => Promise.reject(error)\r\n+    // config => {\r\n+    //     if (store.state.token) {\r\n+    //         config.headers.Authorization = `token ${store.state.token}`\r\n+    //     }\r\n+    //     return config\r\n+    // },\r\n+    // err => {\r\n+    //     return Promise.reject(err)\r\n+    // },\r\n )\r\n axios.interceptors.response.use(\r\n     response => {\r\n         return response\r\n"
                },
                {
                    "date": 1691468499188,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,8 @@\n     error => {\r\n         if (error.response) {\r\n         switch (error.response.status) {\r\n             case 401:\r\n-            store.commit(store.registerUser)\r\n             router.currentRoute.path !== 'login' &&\r\n             router.replace({\r\n                 path: 'login',\r\n                 query: { redirect: router.currentRoute.path },\r\n"
                },
                {
                    "date": 1691468506317,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,6 @@\n import axios from 'axios'\r\n-import { useUserStoreHook } from \"../stores/login\"\r\n \r\n-const store = usePlaneData()\r\n \r\n axios.defaults.timeout = 5000\r\n axios.defaults.baseURL = 'https://reqres.in/api/'\r\n \r\n"
                },
                {
                    "date": 1691468686035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,41 @@\n+import axios from 'axios'\r\n+\r\n+axios.defaults.timeout = 5000\r\n+axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+\r\n+\r\n+\r\n+axios.interceptors.request.use(\r\n+    (config) => config,\r\n+    (error) => Promise.reject(error)\r\n+    // config => {\r\n+    //     if (store.state.token) {\r\n+    //         config.headers.Authorization = `token ${store.state.token}`\r\n+    //     }\r\n+    //     return config\r\n+    // },\r\n+    // err => {\r\n+    //     return Promise.reject(err)\r\n+    // },\r\n+)\r\n+axios.interceptors.response.use(\r\n+    response => {\r\n+        return response\r\n+    },\r\n+    error => {\r\n+        if (error.response) {\r\n+        switch (error.response.status) {\r\n+            case 401:\r\n+            router.currentRoute.path !== 'login' &&\r\n+            router.replace({\r\n+                path: 'login',\r\n+                query: { redirect: router.currentRoute.path },\r\n+            })\r\n+        }\r\n+    }\r\n+        return Promise.reject(error.response.data)\r\n+    },\r\n+)\r\n+\r\n+\r\n+export default axios\r\n"
                },
                {
                    "date": 1691469343586,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,58 @@\n+import axios from 'axios'\r\n+\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        const token = getToken();\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+\r\n+export const request = createRequest(service)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691469449107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,87 +54,5 @@\n         return service(mergeConfig);\r\n     };\r\n }\r\n \r\n-export const request = createRequest(service)\n-import axios from 'axios'\r\n-\r\n-axios.defaults.timeout = 5000\r\n-axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-\r\n-\r\n-\r\n-axios.interceptors.request.use(\r\n-    (config) => config,\r\n-    (error) => Promise.reject(error)\r\n-    // config => {\r\n-    //     if (store.state.token) {\r\n-    //         config.headers.Authorization = `token ${store.state.token}`\r\n-    //     }\r\n-    //     return config\r\n-    // },\r\n-    // err => {\r\n-    //     return Promise.reject(err)\r\n-    // },\r\n-)\r\n-axios.interceptors.response.use(\r\n-    response => {\r\n-        return response\r\n-    },\r\n-    error => {\r\n-        if (error.response) {\r\n-        switch (error.response.status) {\r\n-            case 401:\r\n-            router.currentRoute.path !== 'login' &&\r\n-            router.replace({\r\n-                path: 'login',\r\n-                query: { redirect: router.currentRoute.path },\r\n-            })\r\n-        }\r\n-    }\r\n-        return Promise.reject(error.response.data)\r\n-    },\r\n-)\r\n-\r\n-\r\n-export default axios\r\n-import axios from 'axios'\r\n-\r\n-\r\n-axios.defaults.timeout = 5000\r\n-axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-\r\n-\r\n-\r\n-axios.interceptors.request.use(\r\n-    (config) => config,\r\n-    (error) => Promise.reject(error)\r\n-    // config => {\r\n-    //     if (store.state.token) {\r\n-    //         config.headers.Authorization = `token ${store.state.token}`\r\n-    //     }\r\n-    //     return config\r\n-    // },\r\n-    // err => {\r\n-    //     return Promise.reject(err)\r\n-    // },\r\n-)\r\n-axios.interceptors.response.use(\r\n-    response => {\r\n-        return response\r\n-    },\r\n-    error => {\r\n-        if (error.response) {\r\n-        switch (error.response.status) {\r\n-            case 401:\r\n-            router.currentRoute.path !== 'login' &&\r\n-            router.replace({\r\n-                path: 'login',\r\n-                query: { redirect: router.currentRoute.path },\r\n-            })\r\n-        }\r\n-    }\r\n-        return Promise.reject(error.response.data)\r\n-    },\r\n-)\r\n-\r\n-export default axios\n\\ No newline at end of file\n+export const request = createRequest(service)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691469490443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import axios from 'axios'\r\n+// import axios from 'axios'\r\n \r\n // axios.defaults.timeout = 5000\r\n // axios.defaults.baseURL = 'https://reqres.in/api/'\r\n // axios.interceptors.request.use(\r\n"
                },
                {
                    "date": 1691470116197,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,57 @@\n+// import axios from 'axios'\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+import axios from \"axios\";\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        const token = getToken();\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691471036609,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,57 @@\n+// import axios from 'axios'\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+import axios from \"axios\";\r\n+import getToken from '../utils/cookie'\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        const token = getToken();\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691471061602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,57 @@\n+// import axios from 'axios'\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+import axios from \"axios\";\r\n+import getToken from '../utils/cookie'\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        const token = getToken();\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691471187770,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n //     },\r\n // )\r\n \r\n import axios from \"axios\";\r\n-import getToken from '../utils/cookie'\r\n+import {getToken} from '../utils/cookie'\r\n // export default axios\r\n function createRequest(service) {\r\n     return function(config) {\r\n         const token = getToken();\r\n@@ -53,177 +53,5 @@\n         const mergeConfig = merge(defaultConfig, config);\r\n         return service(mergeConfig);\r\n     };\r\n }\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-import axios from \"axios\";\r\n-import getToken from '../utils/cookie'\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        const token = getToken();\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: token ? `Bearer ${token}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-import axios from \"axios\";\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        const token = getToken();\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: token ? `Bearer ${token}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n-\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        const token = getToken();\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: token ? `Bearer ${token}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n-\r\n-export const request = createRequest(service)\n\\ No newline at end of file\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691471374902,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,58 @@\n+// import axios from 'axios'\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+import axios from \"axios\";\r\n+import {getToken} from '../utils/cookie'\r\n+import { merge } from \"lodash-es\"\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        const token = getToken();\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691471601546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,59 @@\n+// import axios from 'axios'\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+import axios from \"axios\";\r\n+import {getToken} from '../utils/cookie'\r\n+import { merge } from \"lodash-es\"\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        const token = getToken();\r\n+        console.log('token' , token)\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691472770284,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n //     },\r\n // )\r\n \r\n import axios from \"axios\";\r\n-import {getToken} from '../utils/cookie'\r\n+import { getToken } from '../utils/cookie'\r\n import { merge } from \"lodash-es\"\r\n // export default axios\r\n function createRequest(service) {\r\n     return function(config) {\r\n@@ -55,120 +55,5 @@\n         const mergeConfig = merge(defaultConfig, config);\r\n         return service(mergeConfig);\r\n     };\r\n }\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-import axios from \"axios\";\r\n-import {getToken} from '../utils/cookie'\r\n-import { merge } from \"lodash-es\"\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        const token = getToken();\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: token ? `Bearer ${token}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-import axios from \"axios\";\r\n-import {getToken} from '../utils/cookie'\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        const token = getToken();\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: token ? `Bearer ${token}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691474839683,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,13 +35,15 @@\n \r\n import axios from \"axios\";\r\n import { getToken } from '../utils/cookie'\r\n import { merge } from \"lodash-es\"\r\n+import Cookies from 'js-cookie';\r\n // export default axios\r\n function createRequest(service) {\r\n     return function(config) {\r\n         const token = getToken();\r\n         console.log('token' , token)\r\n+        console.log( Cookies.get('token'))\r\n         const defaultConfig = {\r\n             headers: {\r\n             // Carry Token\r\n                 Authorization: token ? `Bearer ${token}` : undefined,\r\n"
                },
                {
                    "date": 1691474844822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,61 @@\n+// import axios from 'axios'\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+import axios from \"axios\";\r\n+import { getToken } from '../utils/cookie'\r\n+import { merge } from \"lodash-es\"\r\n+import Cookies from 'js-cookie';\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        const token = getToken();\r\n+        console.log('token' , token)\r\n+        console.log(Cookies.get('token'))\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691474885256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,14 +40,12 @@\n // export default axios\r\n function createRequest(service) {\r\n     return function(config) {\r\n         const token = getToken();\r\n-        console.log('token' , token)\r\n-        console.log(Cookies.get('token'))\r\n         const defaultConfig = {\r\n             headers: {\r\n             // Carry Token\r\n-                Authorization: token ? `Bearer ${token}` : undefined,\r\n+                Authorization: Cookies.get('token') ? `Bearer ${Cookies.get('token')}` : undefined,\r\n                 \"Content-Type\": \"application/json\"\r\n             },\r\n             timeout: 5000,\r\n             // baseURL: import.meta.env.VITE_BASE_API,\r\n@@ -57,66 +55,5 @@\n         const mergeConfig = merge(defaultConfig, config);\r\n         return service(mergeConfig);\r\n     };\r\n }\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-import axios from \"axios\";\r\n-import { getToken } from '../utils/cookie'\r\n-import { merge } from \"lodash-es\"\r\n-import Cookies from 'js-cookie';\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        const token = getToken();\r\n-        console.log('token' , token)\r\n-        console.log( Cookies.get('token'))\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: token ? `Bearer ${token}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691474895676,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,59 @@\n+// import axios from 'axios'\r\n+// axios.defaults.timeout = 5000\r\n+// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n+// axios.interceptors.request.use(\r\n+//     (config) => config,\r\n+//     (error) => Promise.reject(error)\r\n+//     // config => {\r\n+//     //     if (store.state.token) {\r\n+//     //         config.headers.Authorization = `token ${store.state.token}`\r\n+//     //     }\r\n+//     //     return config\r\n+//     // },\r\n+//     // err => {\r\n+//     //     return Promise.reject(err)\r\n+//     // },\r\n+// )\r\n+// axios.interceptors.response.use(\r\n+//     response => {\r\n+//         return response\r\n+//     },\r\n+//     error => {\r\n+//         if (error.response) {\r\n+//         switch (error.response.status) {\r\n+//             case 401:\r\n+//             router.currentRoute.path !== 'login' &&\r\n+//             router.replace({\r\n+//                 path: 'login',\r\n+//                 query: { redirect: router.currentRoute.path },\r\n+//             })\r\n+//         }\r\n+//     }\r\n+//         return Promise.reject(error.response.data)\r\n+//     },\r\n+// )\r\n+\r\n+import axios from \"axios\";\r\n+// import { getToken } from '../utils/cookie'\r\n+import { merge } from \"lodash-es\"\r\n+import Cookies from 'js-cookie';\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        // const token = getToken();\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: Cookies.get('token') ? `Bearer ${Cookies.get('token')}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            baseURL: 'https://reqres.in/api/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691555203547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,26 @@\n+\r\n+import axios from \"axios\";\r\n+// import { getToken } from '../utils/cookie'\r\n+import { merge } from \"lodash-es\"\r\n+import Cookies from 'js-cookie';\r\n+// export default axios\r\n+function createRequest(service) {\r\n+    return function(config) {\r\n+        // const token = getToken();\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+            // Carry Token\r\n+                Authorization: Cookies.get('token') ? `Bearer ${Cookies.get('token')}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            // baseURL: import.meta.env.VITE_BASE_API,\r\n+            // baseURL: 'https://reqres.in/api/',\r\n+            baseURL:'https://api.escuelajs.co/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return service(mergeConfig);\r\n+    };\r\n+}\r\n+export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691555659880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,130 +15,12 @@\n             },\r\n             timeout: 5000,\r\n             // baseURL: import.meta.env.VITE_BASE_API,\r\n             // baseURL: 'https://reqres.in/api/',\r\n-            baseURL:'https://api.escuelajs.co/',\r\n+            baseURL: 'https://api.escuelajs.co/api/v1/auth/',\r\n             data: {}\r\n         };\r\n         const mergeConfig = merge(defaultConfig, config);\r\n         return service(mergeConfig);\r\n     };\r\n }\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-import axios from \"axios\";\r\n-// import { getToken } from '../utils/cookie'\r\n-import { merge } from \"lodash-es\"\r\n-import Cookies from 'js-cookie';\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        // const token = getToken();\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: Cookies.get('token') ? `Bearer ${Cookies.get('token')}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n-export const request = createRequest(axios)\n-// import axios from 'axios'\r\n-// axios.defaults.timeout = 5000\r\n-// axios.defaults.baseURL = 'https://reqres.in/api/'\r\n-// axios.interceptors.request.use(\r\n-//     (config) => config,\r\n-//     (error) => Promise.reject(error)\r\n-//     // config => {\r\n-//     //     if (store.state.token) {\r\n-//     //         config.headers.Authorization = `token ${store.state.token}`\r\n-//     //     }\r\n-//     //     return config\r\n-//     // },\r\n-//     // err => {\r\n-//     //     return Promise.reject(err)\r\n-//     // },\r\n-// )\r\n-// axios.interceptors.response.use(\r\n-//     response => {\r\n-//         return response\r\n-//     },\r\n-//     error => {\r\n-//         if (error.response) {\r\n-//         switch (error.response.status) {\r\n-//             case 401:\r\n-//             router.currentRoute.path !== 'login' &&\r\n-//             router.replace({\r\n-//                 path: 'login',\r\n-//                 query: { redirect: router.currentRoute.path },\r\n-//             })\r\n-//         }\r\n-//     }\r\n-//         return Promise.reject(error.response.data)\r\n-//     },\r\n-// )\r\n-\r\n-import axios from \"axios\";\r\n-import { getToken } from '../utils/cookie'\r\n-import { merge } from \"lodash-es\"\r\n-import Cookies from 'js-cookie';\r\n-// export default axios\r\n-function createRequest(service) {\r\n-    return function(config) {\r\n-        const token = getToken();\r\n-        const defaultConfig = {\r\n-            headers: {\r\n-            // Carry Token\r\n-                Authorization: Cookies.get('token') ? `Bearer ${Cookies.get('token')}` : undefined,\r\n-                \"Content-Type\": \"application/json\"\r\n-            },\r\n-            timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            baseURL: 'https://reqres.in/api/',\r\n-            data: {}\r\n-        };\r\n-        const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n-    };\r\n-}\r\n export const request = createRequest(axios)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1691981577347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,26 +1,62 @@\n-\r\n import axios from \"axios\";\r\n-// import { getToken } from '../utils/cookie'\r\n import { merge } from \"lodash-es\"\r\n import Cookies from 'js-cookie';\r\n-// export default axios\r\n+\r\n function createRequest(service) {\r\n+    const instance = service.create();\r\n+\r\n+    instance.interceptors.response.use(\r\n+        function (response) {\r\n+            return response;\r\n+        },\r\n+        function (error) {\r\n+            if (error.response) {\r\n+                switch (error.response.status) {\r\n+                    case 401:\r\n+                        //重新授權\r\n+                        const refreshToken = Cookies.get('refreshToken');\r\n+                        const { data } = axios.post('https://api.escuelajs.co/api/v1/auth/refresh-token', { refreshToken });\r\n+                        Cookies.set('token', data.access_token);\r\n+                        Cookies.set('refresh_token', data.refresh_token);\r\n+                        console.log(error.message);\r\n+                        alert('未授權請重新登入')\r\n+                        break;\r\n\\ No newline at end of file\n+                    case 401:\r\n+                        alert('拒絕訪問')\r\n+                        break;\r\n+                    case 404:\r\n+                        console.log(error.message);\r\n+                        alert('資料來源不存在')\r\n+                        break;\r\n+                    case 500:\r\n+                        console.log(error.message);\r\n+                        alert('內部系統發生錯誤')\r\n+                        break;\r\n+                    default:\r\n+                        console.log(error.message);\r\n+                }\r\n+            }\r\n+            if (!window.navigator.onLine) {\r\n+                alert(\"請重新連線後重整網頁\");\r\n+                return;\r\n+            }\r\n+            return Promise.reject(error);\r\n+        },\r\n+    );\r\n+\r\n     return function(config) {\r\n-        // const token = getToken();\r\n         const defaultConfig = {\r\n             headers: {\r\n-            // Carry Token\r\n                 Authorization: Cookies.get('token') ? `Bearer ${Cookies.get('token')}` : undefined,\r\n                 \"Content-Type\": \"application/json\"\r\n             },\r\n             timeout: 5000,\r\n-            // baseURL: import.meta.env.VITE_BASE_API,\r\n-            // baseURL: 'https://reqres.in/api/',\r\n-            baseURL: 'https://api.escuelajs.co/api/v1/auth/',\r\n+            baseURL: 'https://api.escuelajs.co/api/v1/',\r\n             data: {}\r\n         };\r\n         const mergeConfig = merge(defaultConfig, config);\r\n-        return service(mergeConfig);\r\n+        return instance(mergeConfig);\r\n     };\r\n }\r\n-export const request = createRequest(axios)\n+\r\n+export const request = createRequest(axios);\r\n"
                },
                {
                    "date": 1691985638976,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,62 @@\n+import axios from \"axios\";\r\n+import { merge } from \"lodash-es\"\r\n+import Cookies from 'js-cookie';\r\n+\r\n+function createRequest(service) {\r\n+    const instance = service.create();\r\n+\r\n+    instance.interceptors.response.use(\r\n+        function (response) {\r\n+            return response;\r\n+        },\r\n+        function (error) {\r\n+            if (error.response) {\r\n+                switch (error.response.status) {\r\n+                    case 401:\r\n+                        //重新授權\r\n+                        const refreshToken = Cookies.get('refreshToken') || sessionStorage.getItem(\"refresh_token\");\r\n+                        const { data } = axios.post('https://api.escuelajs.co/api/v1/auth/refresh-token', { refreshToken });\r\n+                        Cookies.set('token', data.access_token);\r\n+                        Cookies.set('refresh_token', data.refresh_token);\r\n+                        console.log(error.message);\r\n+                        alert('未授權請重新登入')\r\n+                        break;\r\n+                    case 401:\r\n+                        alert('拒絕訪問')\r\n+                        break;\r\n+                    case 404:\r\n+                        console.log(error.message);\r\n+                        alert('資料來源不存在')\r\n+                        break;\r\n+                    case 500:\r\n+                        console.log(error.message);\r\n+                        alert('內部系統發生錯誤')\r\n+                        break;\r\n+                    default:\r\n+                        console.log(error.message);\r\n+                }\r\n+            }\r\n+            if (!window.navigator.onLine) {\r\n+                alert(\"請重新連線後重整網頁\");\r\n+                return;\r\n+            }\r\n+            return Promise.reject(error);\r\n+        },\r\n+    );\r\n+\r\n+    return function(config) {\r\n+        const defaultConfig = {\r\n+            headers: {\r\n+                Authorization: Cookies.get('token') ? `Bearer ${Cookies.get('token')}` : undefined,\r\n+                \"Content-Type\": \"application/json\"\r\n+            },\r\n+            timeout: 5000,\r\n+            baseURL: 'https://api.escuelajs.co/api/v1/',\r\n+            data: {}\r\n+        };\r\n+        const mergeConfig = merge(defaultConfig, config);\r\n+        return instance(mergeConfig);\r\n+    };\r\n+}\r\n+\r\n+export const request = createRequest(axios);\r\n"
                }
            ],
            "date": 1691468319064,
            "name": "Commit-0",
            "content": "import axios from 'axios'\r\nimport { usePlaneData } from ''\r\n\r\nconst store = usePlaneData()\r\n\r\naxios.defaults.timeout = 5000\r\naxios.defaults.baseURL = 'https://reqres.in/api/'\r\n\r\n\r\n\r\naxios.interceptors.request.use(\r\n    config => {\r\n        if (store.state.token) {\r\n            config.headers.Authorization = `token ${store.state.token}`\r\n        }\r\n        return config\r\n    },\r\n    err => {\r\n        return Promise.reject(err)\r\n    },\r\n)\r\naxios.interceptors.response.use(\r\n    response => {\r\n        return response\r\n    },\r\n    error => {\r\n        if (error.response) {\r\n        switch (error.response.status) {\r\n            case 401:\r\n            store.commit(store.registerUser)\r\n            router.currentRoute.path !== 'login' &&\r\n            router.replace({\r\n                path: 'login',\r\n                query: { redirect: router.currentRoute.path },\r\n            })\r\n        }\r\n    }\r\n        return Promise.reject(error.response.data)\r\n    },\r\n)\r\n\r\nexport default axios\r\n"
        }
    ]
}