import{r as n,o as r,c as h,b as v,w as o,D as V,t as k,C as g,F as S,_ as J,h as _,u as K,x as W,g as X,G as Z,e as a,d as s,a as j,n as P,p as ee,l as le}from"./index-90956256.js";import{u as te}from"./forest-ac3bf427.js";const ae={__name:"MountainFormText",props:{isDelete:Boolean,index:Number,Placeholder:{type:String},label:{type:String},item:{type:Object},modelValue:String,type:{type:String},field:{type:Boolean},data:{type:Array},vee:{type:[String,Array]},name:String,validate:String,error:{type:Boolean,default:!1},errmsg:{type:String,default:"請輸入正確格式或內容"}},emits:["update:modelValue","update:error","deleteItem"],setup(l,{emit:f}){return(p,d)=>{const y=n("q-btn"),m=n("q-input"),x=n("v-checkbox"),w=n("v-select");return r(),h(S,null,[l.type=="text"?(r(),v(m,{key:0,"onUpdate:modelValue":d[1]||(d[1]=i=>p.$emit("update:modelValue",i)),"model-value":l.modelValue,label:l.label,filled:"",placeholder:l.Placeholder,error:l.error,"bottom-slots":"",errmsg:l.errmsg,after:""},{error:o(()=>[V(k(l.errmsg),1)]),after:o(()=>[l.isDelete?(r(),v(y,{key:0,round:"",dense:"",flat:"",icon:"delete",onClick:d[0]||(d[0]=i=>p.$emit("deleteItem",l.index))})):g("",!0)]),_:1},8,["model-value","label","placeholder","error","errmsg"])):g("",!0),l.type=="textarea"?(r(),v(m,{key:1,label:l.label,filled:"",type:"textarea","onUpdate:modelValue":d[3]||(d[3]=i=>p.$emit("update:modelValue",i)),"model-value":l.modelValue},{after:o(()=>[l.isDelete?(r(),v(y,{key:0,round:"",dense:"",flat:"",icon:"send",onClick:d[2]||(d[2]=i=>p.$emit("deleteItem",l.index))},{default:o(()=>[V(" 刪除 ")]),_:1})):g("",!0)]),_:1},8,["label","model-value"])):g("",!0),l.type=="checkbox"?(r(),v(x,{key:2,label:l.label,type:"checkbox"},null,8,["label"])):g("",!0),l.type=="select"?(r(),v(w,{key:3,label:l.label,items:l.data},null,8,["label","items"])):g("",!0),l.type=="date"?(r(),v(m,{key:4,filled:"",error:l.error,type:l.type,"model-value":l.modelValue,errmsg:l.errmsg,"onUpdate:modelValue":d[4]||(d[4]=i=>p.$emit("update:modelValue",i))},{error:o(()=>[V(k(l.errmsg),1)]),_:1},8,["error","type","model-value","errmsg"])):g("",!0)],64)}}};const U=l=>(ee("data-v-a3b6d8d9"),l=l(),le(),l),oe={class:"d-flex flex-column fill-height justify-center align-center text-white"},ne=U(()=>s("h1",{class:"text-h4 font-weight-thin mb-4"},"申請表單",-1)),se={class:"mountainForm"},de={class:"text-center"},re=U(()=>s("div",{class:"text-h6"},"新增欄位",-1)),ue={class:"q-pa-md"},ie={class:"q-gutter-md"},me={class:"q-px-sm"},ce={class:"q-gutter-sm"},ve=U(()=>s("div",{class:"text-h6"},"確認欄位",-1)),fe={class:"q-pa-md"},pe={class:"q-gutter-md"},ye={__name:"MountainForm",setup(l){const f=_("No"),p=K(),d=_(!1),y=_(""),m=_(""),x=_(!1),w=te(),i=W(),$=X(()=>{let u=!1;if(C.value)return!1;for(let e of c.value)e.field&&(e.name==="number_of_people"?e.value===""?(e.errmsg="請輸入正確的活動人數",u=!0):e.errmsg="":e.name==="date"?e.value===""?(e.errmsg="請輸入正確的日期",u=!0):e.errmsg="":e.name==="location"&&(e.value===""?(e.errmsg="請輸入爬山地點",u=!0):e.errmsg=""));return u}),A=()=>{const u={label:y.value,type:f.value=="Yes"?"textarea":"text",field:!1,key:"",validate:"text",name:`field${c.value.length+1}`,value:"",Placeholder:m.value,isDelete:!0};c.value.push(u),y.value="",m.value=""},L=u=>{c.value.splice(u,1)},Y=()=>{C.value=!1,$.value||(x.value=!0)},G=()=>{const u=c.value.reduce((e,b)=>(e[b.name]=b.value,e),{});w.postMountainTripList(u).then(e=>{e.status==="success"?(i.notify({color:"positive",message:"新增成功",icon:"check"}),c.value.forEach(b=>{b.value=""}),p.push({path:"/MountainList"})):i.notify({color:"negative",message:"新增失敗",icon:"close"})}).catch(e=>{console.log(e)})},C=_(!0),c=_([{label:"爬山地點",type:"text",field:!0,key:"",validate:"text",name:"location",value:"",Placeholder:"北大武（單攻）",deleteItem:!1},{label:"日期",type:"date",field:!0,key:"",validate:"text",name:"date",value:"",Placeholder:"ex: 9/30",deleteItem:!1},{label:"聯絡資訊",type:"text",field:!1,key:"",validate:"text",name:"contact_info",value:"",Placeholder:"ex: LINE:ID ",deleteItem:!1},{label:"山岳等級",type:"text",field:!1,key:"",validate:"text",name:"mountain_grade",value:"",Placeholder:"A/B/C 或 百岳雲海級山岳",deleteItem:!1},{label:"集合地點",type:"text",field:!1,key:"",validate:"text",name:"meetup_location",value:"",Placeholder:"台北火車站",deleteItem:!1},{label:"活動人數",type:"text",field:!0,key:"",validate:"text",name:"number_of_people",value:"",Placeholder:"滿7人開團",deleteItem:!1},{label:"交通方式",type:"text",field:!1,key:"",validate:"text",name:"transportation",value:"",Placeholder:"包車/再議",deleteItem:!1}]);return(u,e)=>{const b=n("v-divider"),O=n("v-parallax"),Q=n("v-col"),R=n("v-row"),z=n("v-btn"),F=n("q-card-section"),N=n("q-input"),B=n("q-radio"),q=n("q-btn"),M=n("q-card-actions"),E=n("q-card"),T=n("q-dialog"),I=Z("close-popup");return r(),h(S,null,[a(O,{scale:"1.1",height:"400",src:"https://templates.themekit.dev/alpins/media/hd-3.jpg"},{default:o(()=>[s("div",oe,[ne,a(b,{thickness:3,class:"ma-4 w-50"})])]),_:1}),a(b,{class:"pa-3"}),s("div",se,[a(R,{"no-gutters":"",class:"d-flex justify-start"},{default:o(()=>[(r(!0),h(S,null,j(c.value,(t,D)=>(r(),v(Q,{key:D,cols:"12",sm:"12",md:"6",class:"pa-4"},{default:o(()=>[a(ae,{item:t,label:t.label,validate:t.validate,field:t.field,name:t.name,type:t.type,"model-value":t.value,Placeholder:t.Placeholder,error:t.field==!0?$.value:!1,"onUpdate:modelValue":H=>t.value=H,isDelete:t.isDelete,index:D,errmsg:t.errmsg,onDeleteItem:L},null,8,["item","label","validate","field","name","type","model-value","Placeholder","error","onUpdate:modelValue","isDelete","index","errmsg"])]),_:2},1024))),128))]),_:1}),s("div",de,[a(z,{class:"text-none ma-4",color:"teal-darken-4",onClick:e[0]||(e[0]=t=>Y())},{default:o(()=>[V(" 確認 ")]),_:1})])]),a(T,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=t=>d.value=t),persistent:""},{default:o(()=>[a(E,{style:{"min-width":"350px"}},{default:o(()=>[a(F,null,{default:o(()=>[re]),_:1}),s("div",ue,[s("div",ie,[a(N,{label:"輸入欄位",modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t)},null,8,["modelValue"]),a(N,{label:"輸入提示文字",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t)},null,8,["modelValue"])])]),s("div",me,[V(" 是否開啟輸入多行文字: "),s("strong",null,k(f.value),1)]),s("div",ce,[a(B,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),val:"Yes",label:"Yes"},null,8,["modelValue"]),a(B,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),val:"No",label:"No"},null,8,["modelValue"])]),a(M,{align:"right",class:"text-primary"},{default:o(()=>[P(a(q,{flat:"",label:"關閉"},null,512),[[I]]),P(a(q,{flat:"",label:"新增",onClick:A},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:x.value,"onUpdate:modelValue":e[6]||(e[6]=t=>x.value=t),persistent:""},{default:o(()=>[a(E,{style:{"min-width":"350px"}},{default:o(()=>[a(F,null,{default:o(()=>[ve]),_:1}),s("div",fe,[(r(!0),h(S,null,j(c.value,(t,D)=>(r(),h("div",{key:D},[s("div",pe,[s("div",null,k(t.label)+" ： "+k(t.value),1)])]))),128))]),a(M,{align:"right",class:"text-primary"},{default:o(()=>[P(a(q,{flat:"",label:"關閉"},null,512),[[I]]),P(a(q,{flat:"",label:"送出",onClick:G},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},_e=J(ye,[["__scopeId","data-v-a3b6d8d9"]]);export{_e as default};
